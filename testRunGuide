Got you, Pawan — you cleared everything, so now you want to:

✅ **Login again**
✅ **Generate a fresh JWT token**
✅ **Store it in `$TOKEN`**
✅ **Use it for your API tests**

Here is the cleanest, simplest PowerShell workflow to regenerate and store the token every time.

---

# ✅ **STEP 1 — Login and get a fresh token**

```powershell
$login = Invoke-WebRequest -UseBasicParsing -Method POST "http://localhost:5000/v1/auth/login" `
  -Headers @{ "Content-Type" = "application/json" } `
  -Body '{"email":"newuser@test.com","password":"Test@123"}'
```

---

# ✅ **STEP 2 — Extract the token from `data.token`**

Your backend returns:

```
data.token
```

So extract it like this:

```powershell
$TOKEN = ($login.Content | ConvertFrom-Json).data.token
```

---

# ✅ **STEP 3 — Confirm the token is stored**

```powershell
Write-Host "TOKEN = $TOKEN"
```

You should see a long JWT string.

---

# ✅ **STEP 4 — Use the token for any protected endpoint**

### ✅ Orders

```powershell
$response = Invoke-WebRequest -UseBasicParsing -Method GET "http://localhost:5000/v1/orders" `
  -Headers @{ Authorization = "Bearer $TOKEN" }

($response.Content | ConvertFrom-Json).data[0] | Select-Object createdAt, updatedAt
```

### ✅ Wallet Transactions

```powershell
$response = Invoke-WebRequest -UseBasicParsing -Method GET "http://localhost:5000/v1/wallet/transactions" `
  -Headers @{ Authorization = "Bearer $TOKEN" }

($response.Content | ConvertFrom-Json).data[0] | Select-Object createdAt, amount
```

---

# ✅ **If you want a one‑click script to regenerate token every time**

I can generate a `login.ps1` or `test-all.ps1` script for you.

Just tell me:

- Do you want **login only** script
- Or **login + test orders + test wallet** script

I’ll build it exactly the way you prefer.
